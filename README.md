# Intro
软件开发没有银弹。没有最好的，只有最合适的。本文从前端软件开发的各个角度来描述开发过程，并提供最佳实践（长期更新）。 更多介绍：https://my.oschina.net/wanjubang/blog/1480214

> 注： 由于本文是基于钉钉人力窝项目本身的，本文的一切关注点都是基于react+ redux 架构的。

# 前端开发过程的核心关注点

这里只考虑开发过程，不讨论产品出设计，设计出图，和测试撕逼等一系列过程。

## 处理路由

现在的页面由于多种原因，都在做spa，因此router 必不可少。 
项目中使用的react-router + react-router-redux: 前者是业界标准，后者可以同步 route 信息到 state，
这样你可以在 view 根据 route 信息调整展现，以及通过 action 来修改 route 。

## 组织数据

数据管理使用大名鼎鼎的redux，这里着重讲一下， 一切外部依赖都放在redux store中进行管理。 其他都放在component state 中管理。 为什么
这么做呢？一方面方便测试，我们知道redux是函数式的，方便测试的，而且我们的外部依赖存放在store，因此我们可以通过模拟store，从而模拟外部依赖。第二，
由于react是数据驱动的，我们的目标就是给定的数据，输出的页面是一致的，这样我们可以将核心关注点放在数据本身上。第三，不要将组件自身状态存在store中，什么是组件自身状态？ 组件自身状态包括不限于从props中计算的state，引发自身状态改变的state（是否被选中，是否被点击过等等）。 有人有这个疑问，
如果其他组件需要获取我的组件自身状态（是否被选中，是否点击过等等）呢？ 这里分两种情况，一种是父子组件，这种直接通过父子组件数据共享的方式解决。第二
种情况，组件没有父子关系，可能完全是两个页面。这种直接转化为外部依赖，你可以传到后端，然后再从后端取。或者存到任何其他的外部依赖（localsstorage等）

## 管理外部依赖
外部依赖有哪些？ 后端接口，本地db，用户操作，其他库。 如果管理这些依赖非常重要。我们挨个讨论。
### 后端接口
后端接口，我们统一放到action中处理，这样有一个集中处理和查看的地方，不好的地方在于频繁切换文件，打断思路。
dispatch通过外部注入，我们可以在任意地方调用dispacth 发送action 进而改变store。

参考：

https://github.com/acdlite/redux-promise

https://github.com/acdlite/redux-actions

## 视图
视图就应该有视图的样子。视图应该保证他的纯粹性。 什么意思呢？ 就是说尽可能纯粹。给定外部依赖，输出页面是一致的，给定操作（操作也是一种外部依赖），
页面输出也是一致的（输出不仅仅是展示哦，还包括他影响的其他东西，譬如说受它影响的组件）。 组件最好只有render函数，这样有利于维护测试，而且还有利于代码重用。 试想谁会用你组件里面的方法？

参考：

https://stackoverflow.com/questions/37793936/eslint-react-with-airbnb

https://github.com/missive/functional-components-benchmark

# 基本原则

1.尽量不要手动bind

2.不要写console代码

3. 关键路径加上monitor

4.component 尽量就是一个render（see also： prefer-stateless-function）

5. 不要写for 这种命令式的代码



# 一些准则
1. import 中间   外部函数库和 内部库， 样式  组件 。以及 action 等分组（中间空一行，并在上方加行注释）

2. 函数内部  正常逻辑  和 异常逻辑中间空一行。 先异常return  然后正常逻辑。 变量声明和其他内容空一行

3. 尽量不要给变量命名，因为要命名你就要想一个reasonable 的 名字。

4. think before coding。 写代码前注释写下你的想法。

想好外部依赖，分析好组件划分，划分好函数功能块以及是否可以通用。 正常逻辑是怎样，异常逻辑是怎样。 处理不了的意外输入是否明确抛出。

